<div fxLayout="row" >
  <h3 class="breadCrumb-head">My profile >> {{facultyprofileview.firstname}}  </h3>
</div>
<div id="cmm_ctr" fxLayoutAlign="center center">
  <mat-card fxFlex="90">
  <mat-card-header fxLayoutAlign="center center" fxFill fxLayout="column">
    <mat-card-title fxLayoutAlign="center center">Faculty Profile Adding Page</mat-card-title>
  </mat-card-header>
    <div fxLayout="row" fxflex="60" class="uploadfile-btn" fxLayoutAlign="end">
      <div class="faculty-img">
      <img fxFill src="{{image_URL}}{{facultyprofileview.imagepath}}" alt="profile-img" /></div>
      <app-uploadfile fxFlex="40"></app-uploadfile>
    </div> 
    <mat-card-content fxLayoutAlign="center center">
      <form id="course" fxLayout="column" fxFlex="90" fxFill [formGroup]="facultyForm" >
          
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">
          <div fxFlex="33" class="facultyprof-input" fxFill fxFlex.sm="30"> 
            <span>First name</span>
            <input formControlName="firstName" name="firstname" placeholder="Text" [(ngModel)]="facultyprofileview.firstname" >
            <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
              <div *ngIf="f.firstName.errors.required">First name required</div>
          </div>
          </div>
          <div fxFlex="33" class="facultyprof-input" fxFill fxFlex.sm="30">
            <span>Middle name</span>
            <input formControlName="middleName" name="middlename" placeholder="Text" [(ngModel)]="facultyprofileview.middlename" >
          </div>
          <div fxFlex="33" class="facultyprof-input" fxFill fxFlex.sm="30">
            <span>Last name</span>
            <input formControlName="lastName" name="lastname" placeholder="Text" [(ngModel)]="facultyprofileview.lastname" >
          </div>
        </div>
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">

          <div fxFlex="33" fxFill class="facultyprof-slect"  fxFlex.sm="30">
            <span>Gender</span>
            <select placeholer="Gender" name="gender" [(ngModel)]="facultyprofileview.gender" formControlName="Gender">
              <option value="Male">Male</option>
              <option value="Female">Female</option>
            </select>
            <div *ngIf="submitted && f.Gender.errors" class="invalid-feedback">
              <div *ngIf="f.Gender.errors.required">Gender required</div>
          </div>
          </div>

          <div fxFlex="33" fxFill (click)="picker.open()" class="facultyprof-date" fxFlex.sm="30">
            <span>Date of birth</span>
            <input [matDatepicker]="picker" placeholder="Date" name="date_dob" [formControl]="date_dob" (dateChange)="dobPicked($event)" formControlName="DOB">
            <!-- <mat-datepicker-toggle  matSuffix [for]="picker"></mat-datepicker-toggle> -->
            <div *ngIf="submitted && f.DOB.errors" class="invalid-feedback">
              <div *ngIf="f.DOB.errors.required">DOB required</div>
          </div>
            <mat-datepicker name="date_dob1" #picker></mat-datepicker>
          </div>

          <div fxFlex="33" class="facultyprof-input" fxFill fxFlex.sm="30">
            <span>Employee ID</span>
            <input name="employeeid" placeholder="Text" [(ngModel)]="facultyprofileview.employeeid" formControlName="EmpId" >
            <div *ngIf="submitted && f.EmpId.errors" class="invalid-feedback">
              <div *ngIf="f.EmpId.errors.required">Employee id required</div>
          </div>
          </div>
        </div>
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">

          <div fxFlex="33" class="facultyprof-input" fxFill fxFlex.sm="30">
            <span>Email</span>
            <input name="email" placeholder="Email" [(ngModel)]="facultyprofileview.email" formControlName="Email">
            <div *ngIf="submitted && f.Email.errors" class="invalid-feedback">
              <div *ngIf="f.Email.errors.required">Email required</div>
              <div *ngIf="f.Email.errors.pattern">Email not valid</div>
          </div>
          </div>

          <div fxFlex="33" class="facultyprof-input" fxFill fxFlex.sm="30">
            <span>Profession</span>
            <input name="profession" placeholder="Varchar" [(ngModel)]="facultyprofileview.profession" formControlName="Profession">
            <div *ngIf="submitted && f.Profession.errors" class="invalid-feedback">
              <div *ngIf="f.Profession.errors.required">Profession required</div>
          </div>
          </div>

          <div fxFlex="33" class="facultyprof-input" fxFill fxFlex.sm="30">
            <span>Contact no:</span>
            <input name="contactnumber" placeholder="Number" [(ngModel)]="facultyprofileview.contactnumber" formControlName="ContacctNo">
            <div *ngIf="submitted && f.ContacctNo.errors" class="invalid-feedback">
              <div *ngIf="f.ContacctNo.errors.required">Contact required</div>
              <div *ngIf="f.ContacctNo.errors.pattern">Contact not valid</div>
          </div>
          </div>

        </div>
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">
          <div fxLayout="column" fxFlex="32" fxLayoutGap="10px" fxFlex.sm="30">

            <div fxFlex fxFill class="facultyprof-slect" *ngIf="courseseleted == false">
              <span>Department</span>
              <select placeholer="Text" [(ngModel)]="courseid"   formControlName="Department">
                <option *ngFor="let course of CourseList;let i = index" [value]="course.courseid" >
                  {{course.coursename}}
                </option>
              </select>
              <div *ngIf="submitted && f.Department.errors" class="invalid-feedback">
                <div *ngIf="f.Department.errors.required">Department required</div>
            </div>
            </div>

            <div fxFlex fxFill class="facultyprof-slect" *ngIf="courseseleted == true">
              <span>Department</span>
              <select placeholer="Text" [(ngModel)]="courseid"  formControlName="CourseId">
                <option *ngFor="let course of CourseList;let i = index" [value]="course.courseid" >
                  {{course.coursename}}
                </option>
              </select>
              <div  class="invalid-feedback">
           {{errormsg}}
            </div>
            </div>

            <div class="facultyprof-slect">
              <span>Applicable IC</span>           
              <select placeholer="Number" name="applicableic" [(ngModel)]="facultyprofileview.applicableic" formControlName="ApplicableIC">
                <option *ngFor="let Applicable of ApplicableIc" [value]="Applicable.value">
                  {{Applicable.viewValue}}
                </option>
              </select>
              <div *ngIf="submitted && f.ApplicableIC.errors" class="invalid-feedback">
                <div *ngIf="f.ApplicableIC.errors.required">ApplicableIC required</div>
            </div>
            </div> 

          </div>

          <div class="facultyprof-input" fxFlex="67" fxFill>
            <span>About Description</span>
            <textarea class="facultyprofile-textarea" name="description"
             [(ngModel)]="facultyprofileview.description"matInput placeholder="Text" formControlName="dESC"></textarea>
          </div>
        </div>
      </form>
    </mat-card-content>
    <!--experience form section-->
    <mat-card-content fxLayoutAlign="center center">
        <!-- <button type="button" (click)="addNewexperienceRow()" class="btn btn-primary">Add new Row</button><br> -->
      <form [formGroup]="experienceForm" fxLayout="column" fxFlex="90" fxFill>
        <div fxLayout="row" class="exp-top" fxLayout.xs="column">
          <p>Experience:</p>
        </div>
        <div formArrayName="experienceitemRows" class="experience-fullsection" >
          <div *ngFor="let itemrow of experienceForm.controls.experienceitemRows['controls']; let i=index"  [formGroupName]="i">
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
            <span>Designation</span>
            <input formControlName="designation" placeholder="Text" name="designation"  >
          </div>

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
            <span>Current company name</span>
            <input formControlName="companyname" placeholder="Text" name="companyname"  >
          </div>

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
            <span>Job Description</span>
            <input  formControlName="job" placeholder="Text" name="job"  >
          </div>

        </div>

        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">

		    <div class="facultyprof-date" fxFlex="32" fxFill (click)="picker.open()" fxFlex.sm="30">
            <span>Start Date</span>
            <input formControlName="startdate"  [(ngModel)]="startdate" type="hidden" >
            <input [matDatepicker]="picker" (dateChange)="startDatePicked($event)" placeholder="Date" formControlName="fieldstartdate">
            <!-- <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle> -->
            <mat-datepicker #picker></mat-datepicker>
          </div>

          <div class="facultyprof-date" fxFlex="32" fxFill (click)="endpicker.open()" fxFlex.sm="30">
            <span>End Date</span>
            <input formControlName="enddate"  [(ngModel)]="enddate" type="hidden" >
            <input  [matDatepicker]="endpicker" (dateChange)="endDatePicked($event)" placeholder="Date" formControlName="fieldenddate">
            <!-- <mat-datepicker-toggle matSuffix [for]="endpicker"></mat-datepicker-toggle> -->
            <mat-datepicker #endpicker></mat-datepicker>
          </div>

        </div>
       
      </div>
    </div>
    <div fxLayout="row" class="add-experience addplus-icon">
        <mat-icon (click)="addNewexperienceRow()">add  
              </mat-icon><p class="add-span cursor-pointer" (click)="addNewexperienceRow()">Add Previous Experience</p>
   </div>
      </form>
    </mat-card-content>
    <mat-card-content fxLayoutAlign="center center">
    
      <form [formGroup]="educationForm" fxLayout="column" fxFlex="90" fxFill>
        <div fxLayout="row">
          <p>Education:</p>
        </div>
        <div formArrayName="educationitemRows" class="education-fullsection">
            <div *ngFor="let educationitemrow of educationForm.controls.educationitemRows['controls']; let i=index"  [formGroupName]="i">
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30" >
            <span>Educational qualification</span>
            <input formControlName="qualification" placeholder="Text" name="qualification" required>
          </div>

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
            <span>Course</span>
            <input formControlName="course" placeholder="Text" name="course"  required>
          </div>

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
            <span>Specification</span>
            <input  formControlName="specification" placeholder="Text" name="specification" required>
          </div>

        </div>
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
            <span>University</span>
            <input formControlName="university" placeholder="Text" name="university"  required>
          </div>

          <div class="facultyprof-date" fxFlex="33" fxFill (click)="edupicker.open()" fxFlex.sm="30">
            <span>From date </span>
             <input  [(ngModel)]="educationstartdate" type="hidden" formControlName="educationstartdate">
            <input [matDatepicker]="edupicker" placeholder="Date" (dateChange)="educationstartdatePicked($event)" formControlName="educationstartfielddate" >
            <!-- <mat-datepicker-toggle matSuffix [for]="edupicker"></mat-datepicker-toggle> -->
            <mat-datepicker #edupicker></mat-datepicker>
          </div>

          <div class="facultyprof-date" fxFlex="33" fxFill (click)="eduendpicker.open()" fxFlex.sm="30">
            <span>To date</span>
            <input formControlName="educationtodate"  [(ngModel)]="educationtodate" type="hidden" >
            <input [matDatepicker]="eduendpicker" placeholder="Date" (dateChange)="educationtodatePicked($event)" formControlName="educationtofielddate"> 
            <!-- <mat-datepicker-toggle matSuffix [for]="eduendpicker"></mat-datepicker-toggle> -->
            <mat-datepicker #eduendpicker></mat-datepicker>
          </div>

        </div>
        
      </div>
    </div>
    <div fxLayout="row" class="add-experience addplus-icon">
        <mat-icon (click)="addNeweducationRow()">add
      </mat-icon><p class="add-span cursor-pointer"   (click)="addNeweducationRow()" >Add Previous Education</p>
  </div>
      </form>
    </mat-card-content>


    <!--skills section-->
    <mat-card-content fxLayoutAlign="center center">
        <!-- <button type="button" (click)="addNewskillsRow()" class="btn btn-primary">Add new Row</button><br> -->
      <form [formGroup]="skillsForm" fxLayout="column" fxFlex="90" fxFill>
        <div fxLayout="row">
          <p>Skills:</p>
        </div>
        <div formArrayName="skillsitemRows" class="skills-fullsection">
            <div *ngFor="let skillsitemrow of skillsForm.controls.skillsitemRows['controls']; let i=index"  [formGroupName]="i">
        <div fxLayout="row" fxLayoutGap="20px" fxLayout.xs="column">

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
            <span>Your Skill</span>
            <input formControlName="skill" placeholder="Text" name="skill" required>
          </div>

          <div class="facultyprof-input" fxFlex="33" fxFill fxFlex.sm="30">
              <span> Skill Efficiency ( in %)</span>
              <input formControlName="efficiency" placeholder="Text" name="efficiency" required>
            </div>
         
        </div>
      </div>
    </div>
    <div fxLayout="row" class="addplus-icon">
        <mat-icon (click)="addNewskillsRow()">add
        </mat-icon><p class="add-span cursor-pointer" (click)="addNewskillsRow()">Add Skills</p>
      </div>
      </form>
    </mat-card-content>
    <mat-card-actions fxLayoutAlign="center center" fxFill>
      <button class="exm" mat-flat-button (click)="updateprofile()">Save</button>
    </mat-card-actions>
  </mat-card>
</div>
<ng-template #alertDialog>
  <div class="infoModal">
    <div class="header">
      <h4 class="otp-style" [style.color]="msgcolor"> {{modaltitle}} </h4>
    </div>
    <p>{{modalmsg}}</p>
    <button mat-button class="verify-btn" (click)="closemodal()">close</button>
  </div>
</ng-template>